(()=>{"use strict";const e=window.ReactJSXRuntime;!function(){const{registerPaymentMethod:n}=wc.wcBlocksRegistry,{__}=wp.i18n,{useEffect:o}=wp.element,t=wc.wcSettings.getSetting("monei_paypal_data"),c=n=>{let c=0;const{responseTypes:s}=n.emitResponse,{onPaymentSetup:l,onCheckoutSuccess:r}=n.eventRegistration,{activePaymentMethod:a}=n;let i=null,d=null,m=null;o(()=>{const e=document.querySelector(".wc-block-components-checkout-place-order-button");return"monei_paypal"===a&&e&&(e.style.color="black",e.style.backgroundColor="#ccc",e.disabled=!0),()=>{d&&(d.close(),d=null,m.innerHtml=""),e&&(e.style.color="",e.style.backgroundColor="",e.disabled=!1)}},[a]),o(()=>{"undefined"!=typeof monei&&monei.PayPal?0===c&&u():console.error("MONEI SDK is not available")},[]);const u=()=>{m=document.getElementById("paypal-container"),d=monei.PayPal({accountId:t.accountId,sessionId:t.sessionId,language:t.language,amount:parseInt(100*t.total),currency:t.currency,onSubmit(e){if(e.token){i=e.token;const n=document.querySelector(".wc-block-components-checkout-place-order-button");n?(n.style.color="",n.style.backgroundColor="",n.disabled=!1,n.click()):console.error("Place Order button not found.")}},onError(e){console.error(e)}}),d.render(m),c+=1};return o(()=>{const e=l(()=>i?{type:s.SUCCESS,meta:{paymentMethodData:{monei_payment_request_token:i,monei_is_block_checkout:"yes"}}}:{type:"error",message:__("MONEI token could not be generated.","monei")});return()=>{e()}},[l]),o(()=>{const e=r(({processingResponse:e})=>{const{paymentDetails:n}=e;if(n&&n.paymentId){const e=n.paymentId,o=n.token;monei.confirmPayment({paymentId:e,paymentToken:o}).then(e=>{e.nextAction&&e.nextAction.mustRedirect&&window.location.assign(e.nextAction.redirectUrl),"FAILED"===e.status?window.location.href=`${n.failUrl}&status=FAILED`:window.location.href=n.completeUrl}).catch(e=>{console.error("Error during payment confirmation:",e),window.location.href=n.failUrl})}else console.error("No paymentId found in paymentDetails");return!0});return()=>{e()}},[r]),(0,e.jsx)("fieldset",{className:"monei-fieldset monei-payment-request-fieldset",children:(0,e.jsx)("div",{id:"paypal-container"})})};n({name:"monei_paypal",label:(0,e.jsxs)("div",{children:[" ",(0,e.jsxs)("div",{className:"monei-label-container",children:[(0,e.jsx)("span",{className:"monei-text",children:__(t.title,"monei")}),t?.logo&&(0,e.jsx)("div",{className:"monei-logo",children:(0,e.jsx)("img",{src:t.logo,alt:""})})]})," "]}),ariaLabel:__(t.title,"monei"),content:(0,e.jsx)(c,{}),edit:(0,e.jsxs)("div",{children:[" ",__(t.title,"monei")]}),canMakePayment:()=>!0,supports:t.supports})}()})();